A “design document” for your project in the form of a Markdown file called DESIGN.md that discusses, technically, how you implemented your project and why you made the design decisions you did. Your design document should be at least several paragraphs in length. Whereas your documentation is meant to be a user’s manual, consider your design document your opportunity to give the staff a technical tour of your project underneath its hood.
Explain the below:
Javascript
city_locs.js. This is explained in the index section.
Python
Python was used to write the Flask web app which underlies the site. The app.py application is very minimalistic, simply using Flask to create a web server and handling reroute requests and rendering pages. The complex python programming is almost all contained within helpers.py.
Helpers.py has the functionality of returning search results and finding the Hebrew text of any given chapter and verse range of the Hebrew Bible. The ability of Python to easily read JSON in as a list of dictionaries was extremely important, as well as the capability to install mini.dom and deal with nodes from XML files.
JSON files
While these files are not part of the implementation, a very significant amount of effort went into creating usable JSON files from the file names, using a combination of excel (with lots of visual BASIC macros) to csv to JSON conversions, as well as edits through python programs.
Index
This is the HTML of the homepage of the website. It contains an interactive map with the locations of all the recordings. These markers are clickable and cause the options in the database to be only filtered through that sole location. We found the map online and coded the locations from a javascript file which iterated through all the cities and implemented them with longitude and latitude. We wanted a map like this because we thought it would be beneficial to have a visual example of where diaspora Jews in Middle Eastern and North African countries resided and to be able to physically see where the recording you had selected was coming from. The map was very challenging to make, and we implemented it by moving location data from a separate file into the Javascript file. The Javascript file (city_locs.js) comprised the location data along with a for loop that iterated through all locations and marked up the map upon each new location. We chose to put it in a Javascript file because we spent hours and hours trying to import it directly from JSON to no avail. It was complicated enough to mark up the map from information stored inside the Javascript file without involving another file in the mix. The other half of the page is comprised of a table. The first row of the table is made conventionally and hardcoded in. The rest of the rows are generated with a for loop that grabs the data from a JSON file which is first opened on app.py. The columns are all info on the JSON file, except the final row is the audio button which navigates to the audio page with the biblical text upon a click. The audio file is matched to the recording with the HULTP file, which is a unique ID for each recording. We downloaded the audio files onto our computers in a VSC folder called mp3, which is where we pull the audio files from. We chose JSON and mp3 files because that was the form in which we received the data, and it is roughly 500 units of data so thus difficult to modify.
Layout
We used flask, so we had a layout page. This is mainly just the nav bar, where we had the text in the left top corner that, upon clicking, led back to the home page. Additionally, there was a search bar that took in text and returned rows of data that contained relevant information.
Templates
Along with layout, we had index and listeners. Index warranted its own section. Listeners played the audio file and generated the biblical text via the information we have in the JSON.
CSS
We used CSS to improve the design.
Books and Helpers.py
Books is a folder that stores each book of the Hebrew bible on different xml files with each word comprising of a single line and detailed where verses and chapters end. These files are freely available from tanach.us. Used by helpers.py to get the text from specific sections being read to appear next to the recordings. This was achieved by reading the book and the chapters from the relevant JSON file and indexing into the xml until the matching portion of the biblical text was found. There are several ways to read xml files with python, and we chose to use minidom, which we imported into the python file. We used minidom because it was the most compatible in terms of indexing into the xml file and extracting very specific sets of data. Furthermore, we imported bidi.algorithm, which helps to read Hebrew text in the correct letter (it’s meant to be read right to left, but python naturally reads it from left to right). The individual steps of this process are explained in the file Helpers.py and itself would take several paragraphs to explain.
Static
mp3 contains the meat of the project: nearly the entire archive from the Hebrew University Language Traditions Project which Caleb had access to through his work with Prof. Geoffry Khan of Cambridge University.
